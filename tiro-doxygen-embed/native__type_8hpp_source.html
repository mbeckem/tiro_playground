<script type="text/javascript" src="./jquery.js"></script>
<script type="text/javascript" src="./dynsections.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! --><!-- Generated by Doxygen 1.8.20 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1afa3d02dad28855ed97b47c27baf04d.html">tiropp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">native_type.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="native__type_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">ifndef</span> <span class="preprocessor">TIROPP_NATIVE_TYPE_HPP_INCLUDED</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">define</span> <span class="preprocessor">TIROPP_NATIVE_TYPE_HPP_INCLUDED</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&quot;tiropp/fwd.hpp&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&quot;tiropp/objects.hpp&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&quot;tiropp/vm.hpp&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&lt;</span><span class="preprocessor">memory</span><span class="preprocessor">&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160; </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">namespace</span> <a class="code" href="namespacetiro.html">tiro</a> {</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">namespace</span> <a class="code" href="namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5">detail</a> {</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="structtiro_1_1detail_1_1native__traits.html">   15</a></span>&#160;<span class="keyword">struct</span> <a class="code" href="structtiro_1_1detail_1_1native__traits.html">native_traits</a> {</div>
<div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="structtiro_1_1detail_1_1native__traits_1_1layout.html">   16</a></span>&#160;    <span class="keyword">struct</span> <a class="code" href="structtiro_1_1detail_1_1native__traits_1_1layout.html">layout</a> {</div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="structtiro_1_1detail_1_1native__traits_1_1layout.html#a0e9447221830f8629717836bd933a164">   17</a></span>&#160;        <a class="code" href="structtiro_1_1detail_1_1native__traits_1_1layout.html#a0e9447221830f8629717836bd933a164">layout</a>()</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;            : <a class="code" href="structtiro_1_1detail_1_1native__traits_1_1layout.html#a4e0fab5bba27ff507e909503f0770e58">ptr</a>(<span class="keywordtype">nullptr</span>) {}</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        <span class="comment">// Points to `instance` if it has been fully constructed (and has not been destroyed yet).</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        <span class="comment">// Nullptr otherwise.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="structtiro_1_1detail_1_1native__traits_1_1layout.html#a4e0fab5bba27ff507e909503f0770e58">   22</a></span>&#160;        T* <a class="code" href="structtiro_1_1detail_1_1native__traits_1_1layout.html#a4e0fab5bba27ff507e909503f0770e58">ptr</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        <span class="keyword">union</span> {</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="structtiro_1_1detail_1_1native__traits_1_1layout.html#ac0091740a1a1b13daab37328b10bdc3f">   24</a></span>&#160;            T instance;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        };</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    };</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="structtiro_1_1detail_1_1native__traits.html#ae8542fe44413919dee9f41ede5a5032d">   28</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">constexpr</span> size_t <a class="code" href="structtiro_1_1detail_1_1native__traits.html#ae8542fe44413919dee9f41ede5a5032d">size</a> = <span class="keyword">sizeof</span>(<a class="code" href="structtiro_1_1detail_1_1native__traits_1_1layout.html">layout</a>);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="structtiro_1_1detail_1_1native__traits.html#ad47c355f9110c1d1189a138856541be0">   30</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structtiro_1_1detail_1_1native__traits.html#ad47c355f9110c1d1189a138856541be0">constructor</a>(T&amp;&amp; instance, <span class="keywordtype">void</span>* data) {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <a class="code" href="structtiro_1_1detail_1_1native__traits_1_1layout.html">layout</a>* l = <span class="keyword">new</span> (data) <a class="code" href="structtiro_1_1detail_1_1native__traits_1_1layout.html">layout</a>();</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <span class="keyword">new</span> (std::addressof(l-&gt;instance)) T(std::move(instance));</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        l-&gt;ptr = &amp;l-&gt;instance;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    }</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="structtiro_1_1detail_1_1native__traits.html#a4b8f0227783b8b2ef3978a70c3240a04">   36</a></span>&#160;    <span class="keyword">static</span> T* <a class="code" href="structtiro_1_1detail_1_1native__traits.html#a4b8f0227783b8b2ef3978a70c3240a04">accessor</a>(<span class="keywordtype">void</span>* data) { <span class="keywordflow">return</span> <span class="keyword">static_cast</span>&lt;<a class="code" href="structtiro_1_1detail_1_1native__traits_1_1layout.html">layout</a>*&gt;(data)-&gt;ptr; }</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="structtiro_1_1detail_1_1native__traits.html#a48df75710d9f9e97777e1b25810c1ad6">   38</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structtiro_1_1detail_1_1native__traits.html#a48df75710d9f9e97777e1b25810c1ad6">finalizer</a>(<span class="keywordtype">void</span>* data, [[<a class="code" href="structtiro_1_1detail_1_1native__traits.html#a48df75710d9f9e97777e1b25810c1ad6">maybe_unused</a>]] size_t data_size) <span class="keyword">noexcept</span> {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <a class="code" href="structtiro_1_1detail_1_1native__traits_1_1layout.html">layout</a>* l = <span class="keyword">static_cast</span>&lt;<a class="code" href="structtiro_1_1detail_1_1native__traits_1_1layout.html">layout</a>*&gt;(data);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="keywordflow">if</span> (l-&gt;ptr) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            l-&gt;ptr-&gt;~T();</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            l-&gt;ptr = <span class="keywordtype">nullptr</span>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        }</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    }</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;};</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="structtiro_1_1detail_1_1native__type__data.html">   47</a></span>&#160;<span class="keyword">struct</span> <a class="code" href="structtiro_1_1detail_1_1native__type__data.html">native_type_data</a> {</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="structtiro_1_1detail_1_1native__type__data.html#a9b45b3e13bd9167aab02e17e08916231">   48</a></span>&#160;    std::string <a class="code" href="structtiro_1_1detail_1_1native__type__data.html#a9b45b3e13bd9167aab02e17e08916231">name</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="structtiro_1_1detail_1_1native__type__data.html#a8022e877caf65f7d93df6de3066ca09f">   49</a></span>&#160;    tiro_native_type_t <a class="code" href="structtiro_1_1detail_1_1native__type__data.html#a8022e877caf65f7d93df6de3066ca09f">descriptor</a>{};</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;};</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;} <span class="comment">// namespace detail</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="classtiro_1_1native__type.html">   55</a></span>&#160;<span class="keyword">class</span> native_type final {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">using</span> native_traits = <a class="code" href="namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5">detail</a>::<a class="code" href="structtiro_1_1detail_1_1native__traits.html">native_traits</a>&lt;T&gt;;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// TODO: efficient implementation for pointer types (they can just store a raw pointer).</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keyword">static_assert</span>(!std::is_pointer_v&lt;T&gt; &amp;&amp; !std::is_reference_v&lt;T&gt;,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="stringliteral">&quot;T must neither be a reference nor a pointer type.&quot;</span>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keyword">static_assert</span>(std::is_nothrow_move_constructible_v&lt;T&gt;, <span class="stringliteral">&quot;T must be nothrow move constructible.&quot;</span>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">static_assert</span>(std::is_destructible_v&lt;T&gt;, <span class="stringliteral">&quot;T must be destructible.&quot;</span>);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">static_assert</span>(std::is_nothrow_destructible_v&lt;T&gt;, <span class="stringliteral">&quot;T must not throw from its destructor.&quot;</span>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="classtiro_1_1native__type.html#a7a7e4bfcc571617351401ef6b6211c12">   67</a></span>&#160;    <span class="keyword">explicit</span> <a class="code" href="classtiro_1_1native__type.html#a7a7e4bfcc571617351401ef6b6211c12">native_type</a>(std::string name)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        : holder_(std::make_unique&lt;<a class="code" href="namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5">detail</a>::<a class="code" href="structtiro_1_1detail_1_1native__type__data.html">native_type_data</a>&gt;()) {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        holder_-&gt;<a class="code" href="structtiro_1_1detail_1_1native__type__data.html#a9b45b3e13bd9167aab02e17e08916231">name</a> = std::move(name);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        holder_-&gt;<a class="code" href="structtiro_1_1detail_1_1native__type__data.html#a8022e877caf65f7d93df6de3066ca09f">descriptor</a><a class="code" href="structtiro__native__type.html#a8f8f80d37794cde9472343e4487ba3eb">.</a><a class="code" href="structtiro__native__type.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = holder_-&gt;<a class="code" href="structtiro_1_1detail_1_1native__type__data.html#a9b45b3e13bd9167aab02e17e08916231">name</a>.c_str();</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        holder_-&gt;<a class="code" href="structtiro_1_1detail_1_1native__type__data.html#a8022e877caf65f7d93df6de3066ca09f">descriptor</a><a class="code" href="structtiro__native__type.html#a26b7593edb2ef364ec519c6934fdc432">.</a><a class="code" href="structtiro__native__type.html#a26b7593edb2ef364ec519c6934fdc432">finalizer</a> = native_traits::finalizer;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classtiro_1_1native__type.html#a5ec8e99bbcebfa5a04de6bfd505f4b49">   74</a></span>&#160;    ~<a class="code" href="classtiro_1_1native__type.html#a5ec8e99bbcebfa5a04de6bfd505f4b49">native_type</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classtiro_1_1native__type.html#af6e98cf052959de9126b50eef79db146">   76</a></span>&#160;    <a class="code" href="classtiro_1_1native__type.html#af6e98cf052959de9126b50eef79db146">native_type</a>(native_type&amp;&amp;) <span class="keyword">noexcept</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="classtiro_1_1native__type.html#a1e37c8889b79c040212a59c5779bb8ac">   77</a></span>&#160;    native_type&amp; <a class="code" href="classtiro_1_1native__type.html#a1e37c8889b79c040212a59c5779bb8ac">operator</a>=(native_type&amp;&amp;) <span class="keyword">noexcept</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">/// Returns true is valid, i.e. if this native_type has not been moved from.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="classtiro_1_1native__type.html#a315419f26d3c59fa143b49b90a019049">   80</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classtiro_1_1native__type.html#a315419f26d3c59fa143b49b90a019049">valid</a>() <span class="keyword">const</span> { <span class="keywordflow">return</span> holder_ != <span class="keywordtype">nullptr</span>; }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">/// Returns the native type&#39;s name (the value of original constructor argument).</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="classtiro_1_1native__type.html#ad8227ba86a01f26e4f173cd5e219d5d1">   83</a></span>&#160;    <span class="keyword">const</span> std::string&amp; <a class="code" href="classtiro_1_1native__type.html#ad8227ba86a01f26e4f173cd5e219d5d1">name</a>() <span class="keyword">const</span> {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        check_valid();</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">return</span> holder_-&gt;<a class="code" href="structtiro_1_1detail_1_1native__type__data.html#a9b45b3e13bd9167aab02e17e08916231">name</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">/// Returns true if the given native object is an instance of this type.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classtiro_1_1native__type.html#a8a0fd8a2195dcd850e5aaee1b28b9334">   89</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classtiro_1_1native__type.html#a8a0fd8a2195dcd850e5aaee1b28b9334">is_instance</a>(<span class="keyword">const</span> native&amp; object) <span class="keyword">const</span> {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        check_valid();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">return</span> object<a class="code" href="classtiro_1_1native.html#ac3b1ea1d8d7e6681e8d503dc13545fe5">.</a><a class="code" href="classtiro_1_1native.html#ac3b1ea1d8d7e6681e8d503dc13545fe5">type_descriptor</a><a class="code" href="classtiro_1_1native.html#ac3b1ea1d8d7e6681e8d503dc13545fe5">(</a><a class="code" href="classtiro_1_1native.html#ac3b1ea1d8d7e6681e8d503dc13545fe5">)</a> == &amp;holder_-&gt;<a class="code" href="structtiro_1_1detail_1_1native__type__data.html#a8022e877caf65f7d93df6de3066ca09f">descriptor</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">/// Constructs a new object of this type. The contents of `instance` will be moved into the constructed object.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="classtiro_1_1native__type.html#a8abfb51aaf443c1bd6ce7788338ed4b0">   95</a></span>&#160;    native <a class="code" href="classtiro_1_1native__type.html#a8abfb51aaf443c1bd6ce7788338ed4b0">make</a>(vm&amp; v, T&amp;&amp; instance) <span class="keyword">const</span> {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        check_valid();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="classtiro_1_1handle.html">handle</a> result<a class="code" href="classtiro_1_1handle.html#af2086a7a5a3e3a41e541144b6899339d">(</a>v<a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">.</a><a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">raw_vm</a><a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">(</a><a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">)</a><a class="code" href="classtiro_1_1handle.html#af2086a7a5a3e3a41e541144b6899339d">)</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5">detail</a>::check_handles(v<a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">.</a><a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">raw_vm</a><a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">(</a><a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">)</a>, result);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        tiro_make_native(v<a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">.</a><a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">raw_vm</a><a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">(</a><a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">)</a>, &amp;holder_-&gt;<a class="code" href="structtiro_1_1detail_1_1native__type__data.html#a8022e877caf65f7d93df6de3066ca09f">descriptor</a>, native_traits::size, result<a class="code" href="classtiro_1_1handle.html#a93023f823bb679cc95f9351546137b63">.</a><a class="code" href="classtiro_1_1handle.html#a93023f823bb679cc95f9351546137b63">raw_handle</a><a class="code" href="classtiro_1_1handle.html#a93023f823bb679cc95f9351546137b63">(</a><a class="code" href="classtiro_1_1handle.html#a93023f823bb679cc95f9351546137b63">)</a>,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            error_adapter<a class="code" href="classtiro_1_1error__adapter.html#aa62fce5a346c30ffe205c0abb3a17929">(</a><a class="code" href="classtiro_1_1error__adapter.html#aa62fce5a346c30ffe205c0abb3a17929">)</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        native_traits::constructor(</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            std::move(instance), <a class="code" href="objects_8h.html#a99bff510ea195b106e7d182986868993">tiro_native_data</a><a class="code" href="objects_8h.html#a99bff510ea195b106e7d182986868993">(</a>v<a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">.</a><a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">raw_vm</a><a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">(</a><a class="code" href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">)</a><a class="code" href="objects_8h.html#a99bff510ea195b106e7d182986868993">,</a> result<a class="code" href="classtiro_1_1handle.html#a93023f823bb679cc95f9351546137b63">.</a><a class="code" href="classtiro_1_1handle.html#a93023f823bb679cc95f9351546137b63">raw_handle</a><a class="code" href="classtiro_1_1handle.html#a93023f823bb679cc95f9351546137b63">(</a><a class="code" href="classtiro_1_1handle.html#a93023f823bb679cc95f9351546137b63">)</a><a class="code" href="objects_8h.html#a99bff510ea195b106e7d182986868993">)</a>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">return</span> native<a class="code" href="classtiro_1_1native.html#a101b88fb50fc318dd120855c15039297">(</a>std::move(result)<a class="code" href="classtiro_1_1native.html#a101b88fb50fc318dd120855c15039297">)</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">/// Returns the address of the native object instance.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">/// TODO: This API will have to change (or become more dangeous) once the gc starts to move objects around.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classtiro_1_1native__type.html#a85058eab4be0f3fe8f41e6a414a043c5">  109</a></span>&#160;    T* <a class="code" href="classtiro_1_1native__type.html#a85058eab4be0f3fe8f41e6a414a043c5">access</a>(<span class="keyword">const</span> native&amp; object) <span class="keyword">const</span> {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        check_valid();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        check_instance(object);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <a class="code" href="def_8hpp.html#a2839fc1ce89b383710f4e8a191fa227a">TIRO_ASSERT</a>(object<a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">.</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">data</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">(</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">)</a> != <span class="keywordtype">nullptr</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <a class="code" href="def_8hpp.html#a2839fc1ce89b383710f4e8a191fa227a">TIRO_ASSERT</a>(object<a class="code" href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">.</a><a class="code" href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">size</a><a class="code" href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">(</a><a class="code" href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">)</a> == native_traits::size);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        T* result = native_traits::accessor(object<a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">.</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">data</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">(</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">)</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> (!result)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="classtiro_1_1generic__error.html">generic_error</a><a class="code" href="classtiro_1_1generic__error.html#ae9eb33491c52402f531cd98fdfe55919">(</a><span class="stringliteral">&quot;The object was already destroyed.&quot;</span><a class="code" href="classtiro_1_1generic__error.html#ae9eb33491c52402f531cd98fdfe55919">)</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">/// Returns true if the referenced object was already destroyed manually by calling `destroy()`.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="classtiro_1_1native__type.html#a5834e49cfcd11786cd38bc712b66bac3">  122</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classtiro_1_1native__type.html#a5834e49cfcd11786cd38bc712b66bac3">is_destroyed</a>(<span class="keyword">const</span> native&amp; object) <span class="keyword">const</span> {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        check_valid();</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        check_instance(object);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="def_8hpp.html#a2839fc1ce89b383710f4e8a191fa227a">TIRO_ASSERT</a>(object<a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">.</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">data</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">(</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">)</a> != <span class="keywordtype">nullptr</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <a class="code" href="def_8hpp.html#a2839fc1ce89b383710f4e8a191fa227a">TIRO_ASSERT</a>(object<a class="code" href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">.</a><a class="code" href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">size</a><a class="code" href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">(</a><a class="code" href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">)</a> == native_traits::size);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">return</span> native_traits::accessor(object<a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">.</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">data</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">(</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">)</a>) == <span class="keywordtype">nullptr</span>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">/// Manually destroys the native object. Future `access()` calls to the same object will fail</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">/// with an exception.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">/// Note that objects are destroyed automatically when they are collected by the garbage collector.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">/// This function allows the programmer to trigger the destruction at an earlier point in time.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="classtiro_1_1native__type.html#ab281fcb04e6fc6cba48625b99fbd2ce8">  135</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classtiro_1_1native__type.html#ab281fcb04e6fc6cba48625b99fbd2ce8">destroy</a>(<span class="keyword">const</span> native&amp; object) <span class="keyword">const</span> {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        check_valid();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        check_instance(object);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <a class="code" href="def_8hpp.html#a2839fc1ce89b383710f4e8a191fa227a">TIRO_ASSERT</a>(object<a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">.</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">data</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">(</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">)</a> != <span class="keywordtype">nullptr</span>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="def_8hpp.html#a2839fc1ce89b383710f4e8a191fa227a">TIRO_ASSERT</a>(object<a class="code" href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">.</a><a class="code" href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">size</a><a class="code" href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">(</a><a class="code" href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">)</a> == native_traits::size);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        native_traits::finalizer(object<a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">.</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">data</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">(</a><a class="code" href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">)</a>, native_traits::size);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">void</span> check_valid() <span class="keyword">const</span> {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classtiro_1_1native__type.html#a315419f26d3c59fa143b49b90a019049">valid</a><a class="code" href="classtiro_1_1native__type.html#a315419f26d3c59fa143b49b90a019049">(</a><a class="code" href="classtiro_1_1native__type.html#a315419f26d3c59fa143b49b90a019049">)</a>)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="classtiro_1_1generic__error.html">generic_error</a><a class="code" href="classtiro_1_1generic__error.html#ae9eb33491c52402f531cd98fdfe55919">(</a><span class="stringliteral">&quot;This native_type is no longer valid.&quot;</span><a class="code" href="classtiro_1_1generic__error.html#ae9eb33491c52402f531cd98fdfe55919">)</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordtype">void</span> check_instance(<span class="keyword">const</span> native&amp; object) <span class="keyword">const</span> {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classtiro_1_1native__type.html#a8a0fd8a2195dcd850e5aaee1b28b9334">is_instance</a><a class="code" href="classtiro_1_1native__type.html#a8a0fd8a2195dcd850e5aaee1b28b9334">(</a>object<a class="code" href="classtiro_1_1native__type.html#a8a0fd8a2195dcd850e5aaee1b28b9334">)</a>)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="classtiro_1_1generic__error.html">generic_error</a><a class="code" href="classtiro_1_1generic__error.html#ae9eb33491c52402f531cd98fdfe55919">(</a><span class="stringliteral">&quot;The object is not an instance of this type.&quot;</span><a class="code" href="classtiro_1_1generic__error.html#ae9eb33491c52402f531cd98fdfe55919">)</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    std::unique_ptr&lt;<a class="code" href="namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5">detail</a>::<a class="code" href="structtiro_1_1detail_1_1native__type__data.html">native_type_data</a>&gt; holder_;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;};</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;} <span class="comment">// namespace tiro</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#</span><span class="preprocessor">endif</span> <span class="comment">// TIROPP_NATIVE_TYPE_HPP_INCLUDED</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclasstiro_1_1native__type_html_a5ec8e99bbcebfa5a04de6bfd505f4b49"><div class="ttname"><a href="classtiro_1_1native__type.html#a5ec8e99bbcebfa5a04de6bfd505f4b49">tiro::native_type::~native_type</a></div><div class="ttdeci">~native_type()=default</div></div>
<div class="ttc" id="anamespacetiro_1_1detail_html_a4c18f96591ca42f3ea6c7738593bb3f5"><div class="ttname"><a href="namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5">tiro::detail::check_handles</a></div><div class="ttdeci">void check_handles(tiro_vm_t, const Handles &amp;...)</div><div class="ttdef"><b>Definition:</b> <a href="handle__check_8hpp_source.html#l00049">handle_check.hpp:49</a></div></div>
<div class="ttc" id="aclasstiro_1_1native_html_ae5911a048d63c6ea964463968a34e9e0"><div class="ttname"><a href="classtiro_1_1native.html#ae5911a048d63c6ea964463968a34e9e0">tiro::native::data</a></div><div class="ttdeci">void * data() const</div><div class="ttdef"><b>Definition:</b> <a href="objects_8hpp_source.html#l00818">objects.hpp:818</a></div></div>
<div class="ttc" id="aclasstiro_1_1native__type_html_a85058eab4be0f3fe8f41e6a414a043c5"><div class="ttname"><a href="classtiro_1_1native__type.html#a85058eab4be0f3fe8f41e6a414a043c5">tiro::native_type::access</a></div><div class="ttdeci">T * access(const native &amp;object) const</div><div class="ttdoc">Returns the address of the native object instance.</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00109">native_type.hpp:109</a></div></div>
<div class="ttc" id="aclasstiro_1_1native__type_html_a8a0fd8a2195dcd850e5aaee1b28b9334"><div class="ttname"><a href="classtiro_1_1native__type.html#a8a0fd8a2195dcd850e5aaee1b28b9334">tiro::native_type::is_instance</a></div><div class="ttdeci">bool is_instance(const native &amp;object) const</div><div class="ttdoc">Returns true if the given native object is an instance of this type.</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00089">native_type.hpp:89</a></div></div>
<div class="ttc" id="aclasstiro_1_1native__type_html_ab281fcb04e6fc6cba48625b99fbd2ce8"><div class="ttname"><a href="classtiro_1_1native__type.html#ab281fcb04e6fc6cba48625b99fbd2ce8">tiro::native_type::destroy</a></div><div class="ttdeci">void destroy(const native &amp;object) const</div><div class="ttdoc">Manually destroys the native object.</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00135">native_type.hpp:135</a></div></div>
<div class="ttc" id="aclasstiro_1_1native_html_a101b88fb50fc318dd120855c15039297"><div class="ttname"><a href="classtiro_1_1native.html#a101b88fb50fc318dd120855c15039297">tiro::native::native</a></div><div class="ttdeci">native(handle h)</div><div class="ttdef"><b>Definition:</b> <a href="objects_8hpp_source.html#l00801">objects.hpp:801</a></div></div>
<div class="ttc" id="aclasstiro_1_1generic__error_html_ae9eb33491c52402f531cd98fdfe55919"><div class="ttname"><a href="classtiro_1_1generic__error.html#ae9eb33491c52402f531cd98fdfe55919">tiro::generic_error::generic_error</a></div><div class="ttdeci">generic_error(std::string message)</div><div class="ttdef"><b>Definition:</b> <a href="error_8hpp_source.html#l00054">error.hpp:54</a></div></div>
<div class="ttc" id="astructtiro_1_1detail_1_1native__type__data_html_a8022e877caf65f7d93df6de3066ca09f"><div class="ttname"><a href="structtiro_1_1detail_1_1native__type__data.html#a8022e877caf65f7d93df6de3066ca09f">tiro::detail::native_type_data::descriptor</a></div><div class="ttdeci">tiro_native_type_t descriptor</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00049">native_type.hpp:49</a></div></div>
<div class="ttc" id="astructtiro_1_1detail_1_1native__traits_1_1layout_html"><div class="ttname"><a href="structtiro_1_1detail_1_1native__traits_1_1layout.html">tiro::detail::native_traits::layout</a></div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00016">native_type.hpp:16</a></div></div>
<div class="ttc" id="astructtiro_1_1detail_1_1native__traits_1_1layout_html_a0e9447221830f8629717836bd933a164"><div class="ttname"><a href="structtiro_1_1detail_1_1native__traits_1_1layout.html#a0e9447221830f8629717836bd933a164">tiro::detail::native_traits::layout::layout</a></div><div class="ttdeci">layout()</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00017">native_type.hpp:17</a></div></div>
<div class="ttc" id="astructtiro__native__type_html_a26b7593edb2ef364ec519c6934fdc432"><div class="ttname"><a href="structtiro__native__type.html#a26b7593edb2ef364ec519c6934fdc432">tiro_native_type::finalizer</a></div><div class="ttdeci">void(* finalizer)(void *data, size_t size)</div><div class="ttdoc">This function will be invoked exactly once for each object when it is being garbage collected.</div><div class="ttdef"><b>Definition:</b> <a href="objects_8h_source.html#l00411">objects.h:411</a></div></div>
<div class="ttc" id="astructtiro_1_1detail_1_1native__traits_html"><div class="ttname"><a href="structtiro_1_1detail_1_1native__traits.html">tiro::detail::native_traits</a></div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00015">native_type.hpp:15</a></div></div>
<div class="ttc" id="astructtiro__native__type_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="structtiro__native__type.html#a8f8f80d37794cde9472343e4487ba3eb">tiro_native_type::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">The human readable name of this type, mainly for debugging.</div><div class="ttdef"><b>Definition:</b> <a href="objects_8h_source.html#l00402">objects.h:402</a></div></div>
<div class="ttc" id="astructtiro_1_1detail_1_1native__traits_html_a4b8f0227783b8b2ef3978a70c3240a04"><div class="ttname"><a href="structtiro_1_1detail_1_1native__traits.html#a4b8f0227783b8b2ef3978a70c3240a04">tiro::detail::native_traits::accessor</a></div><div class="ttdeci">static T * accessor(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00036">native_type.hpp:36</a></div></div>
<div class="ttc" id="aclasstiro_1_1native__type_html_ad8227ba86a01f26e4f173cd5e219d5d1"><div class="ttname"><a href="classtiro_1_1native__type.html#ad8227ba86a01f26e4f173cd5e219d5d1">tiro::native_type::name</a></div><div class="ttdeci">const std::string &amp; name() const</div><div class="ttdoc">Returns the native type's name (the value of original constructor argument).</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00083">native_type.hpp:83</a></div></div>
<div class="ttc" id="astructtiro_1_1detail_1_1native__type__data_html"><div class="ttname"><a href="structtiro_1_1detail_1_1native__type__data.html">tiro::detail::native_type_data</a></div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00047">native_type.hpp:47</a></div></div>
<div class="ttc" id="astructtiro_1_1detail_1_1native__type__data_html_a9b45b3e13bd9167aab02e17e08916231"><div class="ttname"><a href="structtiro_1_1detail_1_1native__type__data.html#a9b45b3e13bd9167aab02e17e08916231">tiro::detail::native_type_data::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00048">native_type.hpp:48</a></div></div>
<div class="ttc" id="aclasstiro_1_1generic__error_html"><div class="ttname"><a href="classtiro_1_1generic__error.html">tiro::generic_error</a></div><div class="ttdoc">Generic error with a simple message.</div><div class="ttdef"><b>Definition:</b> <a href="error_8hpp_source.html#l00052">error.hpp:52</a></div></div>
<div class="ttc" id="aclasstiro_1_1native__type_html_af6e98cf052959de9126b50eef79db146"><div class="ttname"><a href="classtiro_1_1native__type.html#af6e98cf052959de9126b50eef79db146">tiro::native_type::native_type</a></div><div class="ttdeci">native_type(native_type &amp;&amp;) noexcept=default</div></div>
<div class="ttc" id="aclasstiro_1_1native_html_ac3b1ea1d8d7e6681e8d503dc13545fe5"><div class="ttname"><a href="classtiro_1_1native.html#ac3b1ea1d8d7e6681e8d503dc13545fe5">tiro::native::type_descriptor</a></div><div class="ttdeci">const tiro_native_type_t * type_descriptor() const</div><div class="ttdef"><b>Definition:</b> <a href="objects_8hpp_source.html#l00810">objects.hpp:810</a></div></div>
<div class="ttc" id="astructtiro_1_1detail_1_1native__traits_html_ad47c355f9110c1d1189a138856541be0"><div class="ttname"><a href="structtiro_1_1detail_1_1native__traits.html#ad47c355f9110c1d1189a138856541be0">tiro::detail::native_traits::constructor</a></div><div class="ttdeci">static void constructor(T &amp;&amp;instance, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00030">native_type.hpp:30</a></div></div>
<div class="ttc" id="astructtiro_1_1detail_1_1native__traits_html_a48df75710d9f9e97777e1b25810c1ad6"><div class="ttname"><a href="structtiro_1_1detail_1_1native__traits.html#a48df75710d9f9e97777e1b25810c1ad6">tiro::detail::native_traits::finalizer</a></div><div class="ttdeci">static void finalizer(void *data, [[maybe_unused]] size_t data_size) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00038">native_type.hpp:38</a></div></div>
<div class="ttc" id="aclasstiro_1_1native__type_html_a5834e49cfcd11786cd38bc712b66bac3"><div class="ttname"><a href="classtiro_1_1native__type.html#a5834e49cfcd11786cd38bc712b66bac3">tiro::native_type::is_destroyed</a></div><div class="ttdeci">bool is_destroyed(const native &amp;object) const</div><div class="ttdoc">Returns true if the referenced object was already destroyed manually by calling destroy().</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00122">native_type.hpp:122</a></div></div>
<div class="ttc" id="anamespacetiro_html"><div class="ttname"><a href="namespacetiro.html">tiro</a></div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00014">compiler.hpp:14</a></div></div>
<div class="ttc" id="aclasstiro_1_1native_html_a259cb5a711406a8c3e5d937eb9350cca"><div class="ttname"><a href="classtiro_1_1native.html#a259cb5a711406a8c3e5d937eb9350cca">tiro::native::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="objects_8hpp_source.html#l00826">objects.hpp:826</a></div></div>
<div class="ttc" id="aclasstiro_1_1handle_html_a93023f823bb679cc95f9351546137b63"><div class="ttname"><a href="classtiro_1_1handle.html#a93023f823bb679cc95f9351546137b63">tiro::handle::raw_handle</a></div><div class="ttdeci">tiro_handle_t raw_handle() const</div><div class="ttdoc">Returns the raw handle instance (nullptr for invalid handles).</div><div class="ttdef"><b>Definition:</b> <a href="objects_8hpp_source.html#l00146">objects.hpp:146</a></div></div>
<div class="ttc" id="aobjects_8h_html_a99bff510ea195b106e7d182986868993"><div class="ttname"><a href="objects_8h.html#a99bff510ea195b106e7d182986868993">tiro_native_data</a></div><div class="ttdeci">void * tiro_native_data(tiro_vm_t vm, tiro_handle_t object)</div><div class="ttdoc">Returns the address of the allocated user storage of the given native object.</div></div>
<div class="ttc" id="aclasstiro_1_1native__type_html_a315419f26d3c59fa143b49b90a019049"><div class="ttname"><a href="classtiro_1_1native__type.html#a315419f26d3c59fa143b49b90a019049">tiro::native_type::valid</a></div><div class="ttdeci">bool valid() const</div><div class="ttdoc">Returns true is valid, i.e. if this native_type has not been moved from.</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00080">native_type.hpp:80</a></div></div>
<div class="ttc" id="aclasstiro_1_1handle_html"><div class="ttname"><a href="classtiro_1_1handle.html">tiro::handle</a></div><div class="ttdoc">A handle represents a reference to an object.</div><div class="ttdef"><b>Definition:</b> <a href="objects_8hpp_source.html#l00071">objects.hpp:71</a></div></div>
<div class="ttc" id="astructtiro_1_1detail_1_1native__traits_html_ae8542fe44413919dee9f41ede5a5032d"><div class="ttname"><a href="structtiro_1_1detail_1_1native__traits.html#ae8542fe44413919dee9f41ede5a5032d">tiro::detail::native_traits::size</a></div><div class="ttdeci">static constexpr size_t size</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00028">native_type.hpp:28</a></div></div>
<div class="ttc" id="astructtiro_1_1detail_1_1native__traits_1_1layout_html_a4e0fab5bba27ff507e909503f0770e58"><div class="ttname"><a href="structtiro_1_1detail_1_1native__traits_1_1layout.html#a4e0fab5bba27ff507e909503f0770e58">tiro::detail::native_traits::layout::ptr</a></div><div class="ttdeci">T * ptr</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00022">native_type.hpp:22</a></div></div>
<div class="ttc" id="aclasstiro_1_1handle_html_af2086a7a5a3e3a41e541144b6899339d"><div class="ttname"><a href="classtiro_1_1handle.html#af2086a7a5a3e3a41e541144b6899339d">tiro::handle::handle</a></div><div class="ttdeci">handle(tiro_vm_t raw_vm)</div><div class="ttdoc">Constructs a new handle instance.</div><div class="ttdef"><b>Definition:</b> <a href="objects_8hpp_source.html#l00077">objects.hpp:77</a></div></div>
<div class="ttc" id="aclasstiro_1_1native__type_html_a8abfb51aaf443c1bd6ce7788338ed4b0"><div class="ttname"><a href="classtiro_1_1native__type.html#a8abfb51aaf443c1bd6ce7788338ed4b0">tiro::native_type::make</a></div><div class="ttdeci">native make(vm &amp;v, T &amp;&amp;instance) const</div><div class="ttdoc">Constructs a new object of this type. The contents of instance will be moved into the constructed obj...</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00095">native_type.hpp:95</a></div></div>
<div class="ttc" id="aclasstiro_1_1error__adapter_html_aa62fce5a346c30ffe205c0abb3a17929"><div class="ttname"><a href="classtiro_1_1error__adapter.html#aa62fce5a346c30ffe205c0abb3a17929">tiro::error_adapter::error_adapter</a></div><div class="ttdeci">error_adapter()=default</div></div>
<div class="ttc" id="adef_8hpp_html_a2839fc1ce89b383710f4e8a191fa227a"><div class="ttname"><a href="def_8hpp.html#a2839fc1ce89b383710f4e8a191fa227a">TIRO_ASSERT</a></div><div class="ttdeci">#define TIRO_ASSERT(expr)</div><div class="ttdef"><b>Definition:</b> <a href="def_8hpp_source.html#l00020">def.hpp:20</a></div></div>
<div class="ttc" id="aclasstiro_1_1native__type_html_a1e37c8889b79c040212a59c5779bb8ac"><div class="ttname"><a href="classtiro_1_1native__type.html#a1e37c8889b79c040212a59c5779bb8ac">tiro::native_type::operator=</a></div><div class="ttdeci">native_type &amp; operator=(native_type &amp;&amp;) noexcept=default</div></div>
<div class="ttc" id="aclasstiro_1_1vm_html_a56bc60c484bbd125830da6975b8ca8e3"><div class="ttname"><a href="classtiro_1_1vm.html#a56bc60c484bbd125830da6975b8ca8e3">tiro::vm::raw_vm</a></div><div class="ttdeci">tiro_vm_t raw_vm() const</div><div class="ttdoc">Returns the raw virtual machine instance managed by this object.</div><div class="ttdef"><b>Definition:</b> <a href="vm_8hpp_source.html#l00055">vm.hpp:55</a></div></div>
<div class="ttc" id="aclasstiro_1_1native__type_html_a7a7e4bfcc571617351401ef6b6211c12"><div class="ttname"><a href="classtiro_1_1native__type.html#a7a7e4bfcc571617351401ef6b6211c12">tiro::native_type::native_type</a></div><div class="ttdeci">native_type(std::string name)</div><div class="ttdef"><b>Definition:</b> <a href="native__type_8hpp_source.html#l00067">native_type.hpp:67</a></div></div>
