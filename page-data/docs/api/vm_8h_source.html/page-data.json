{"componentChunkName":"component---src-templates-doxygen-article-tsx","path":"/docs/api/vm_8h_source.html","result":{"pageContext":{"title":"tiro/vm.h Source File","rawHtml":"<div id=\"top\"><!-- do not remove this div, it is closed by doxygen! -->\n<!-- Generated by Doxygen 1.8.20 -->\n  <div id=\"navrow1\" class=\"tabs\">\n    <ul class=\"tablist\">\n      <li><a href=\"index.html\"><span>Main&#160;Page</span></a></li>\n      <li><a href=\"pages.html\"><span>Related&#160;Pages</span></a></li>\n      <li><a href=\"namespaces.html\"><span>Namespaces</span></a></li>\n      <li><a href=\"annotated.html\"><span>Classes</span></a></li>\n      <li class=\"current\"><a href=\"files.html\"><span>Files</span></a></li>\n    </ul>\n  </div>\n  <div id=\"navrow2\" class=\"tabs2\">\n    <ul class=\"tablist\">\n      <li><a href=\"files.html\"><span>File&#160;List</span></a></li>\n      <li><a href=\"globals.html\"><span>File&#160;Members</span></a></li>\n    </ul>\n  </div>\n<div id=\"nav-path\" class=\"navpath\">\n  <ul>\n<li class=\"navelem\"><a class=\"el\" href=\"dir_44997bd94c12133dacb733a9a192caea.html\">tiro</a></li>  </ul>\n</div>\n</div><!-- top -->\n<div class=\"header\">\n  <div class=\"headertitle\">\n<div class=\"title\">vm.h</div>  </div>\n</div><!--header-->\n<div class=\"contents\">\n<a href=\"vm_8h.html\">Go to the documentation of this file.</a><div class=\"fragment\"><div class=\"line\"><a name=\"l00001\"></a><span class=\"lineno\">    1</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">ifndef</span> <span class=\"preprocessor\">TIRO_VM_H_INCLUDED</span></div>\n<div class=\"line\"><a name=\"l00002\"></a><span class=\"lineno\">    2</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">define</span> <span class=\"preprocessor\">TIRO_VM_H_INCLUDED</span></div>\n<div class=\"line\"><a name=\"l00003\"></a><span class=\"lineno\">    3</span>&#160; </div>\n<div class=\"line\"><a name=\"l00004\"></a><span class=\"lineno\">    4</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">include</span> <span class=\"preprocessor\">&quot;tiro/def.h&quot;</span></div>\n<div class=\"line\"><a name=\"l00005\"></a><span class=\"lineno\">    5</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">include</span> <span class=\"preprocessor\">&quot;tiro/error.h&quot;</span></div>\n<div class=\"line\"><a name=\"l00006\"></a><span class=\"lineno\">    6</span>&#160; </div>\n<div class=\"line\"><a name=\"l00007\"></a><span class=\"lineno\">    7</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">ifdef</span> __cplusplus</div>\n<div class=\"line\"><a name=\"l00008\"></a><span class=\"lineno\">    8</span>&#160;<span class=\"keyword\">extern</span> <span class=\"stringliteral\">&quot;C&quot;</span> {</div>\n<div class=\"line\"><a name=\"l00009\"></a><span class=\"lineno\">    9</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">endif</span></div>\n<div class=\"line\"><a name=\"l00010\"></a><span class=\"lineno\">   10</span>&#160; </div>\n<div class=\"line\"><a name=\"l00011\"></a><span class=\"lineno\">   11</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00012\"></a><span class=\"lineno\">   12</span>&#160;<span class=\"comment\"> * The tiro_vm_settings structure can be provided to `tiro_vm_new` as a</span></div>\n<div class=\"line\"><a name=\"l00013\"></a><span class=\"lineno\">   13</span>&#160;<span class=\"comment\"> * configuration parameter.</span></div>\n<div class=\"line\"><a name=\"l00014\"></a><span class=\"lineno\">   14</span>&#160;<span class=\"comment\"> * Use tiro_vm_settings_init to initialize this struct to default values.</span></div>\n<div class=\"line\"><a name=\"l00015\"></a><span class=\"lineno\">   15</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00016\"></a><span class=\"lineno\"><a class=\"line\" href=\"structtiro__vm__settings.html\">   16</a></span>&#160;<span class=\"keyword\">typedef</span> <span class=\"keyword\">struct</span> <a class=\"code\" href=\"structtiro__vm__settings.html\">tiro_vm_settings</a> {</div>\n<div class=\"line\"><a name=\"l00017\"></a><span class=\"lineno\">   17</span>&#160;    <span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00018\"></a><span class=\"lineno\">   18</span>&#160;<span class=\"comment\">     * Arbitrary user data that will be accessible by calling `tiro_vm_userdata()`. This value</span></div>\n<div class=\"line\"><a name=\"l00019\"></a><span class=\"lineno\">   19</span>&#160;<span class=\"comment\">     * is never interpreted in any way. This value is NULL by default.</span></div>\n<div class=\"line\"><a name=\"l00020\"></a><span class=\"lineno\">   20</span>&#160;<span class=\"comment\">     */</span></div>\n<div class=\"line\"><a name=\"l00021\"></a><span class=\"lineno\"><a class=\"line\" href=\"structtiro__vm__settings.html#afd0ffb02780e738d4c0a10ab833b7834\">   21</a></span>&#160;    <span class=\"keywordtype\">void</span>* <a class=\"code\" href=\"structtiro__vm__settings.html#afd0ffb02780e738d4c0a10ab833b7834\">userdata</a>;</div>\n<div class=\"line\"><a name=\"l00022\"></a><span class=\"lineno\">   22</span>&#160; </div>\n<div class=\"line\"><a name=\"l00023\"></a><span class=\"lineno\">   23</span>&#160;    <span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00024\"></a><span class=\"lineno\">   24</span>&#160;<span class=\"comment\">     * This callback is invoked when the vm attempts to print to the standard output stream,</span></div>\n<div class=\"line\"><a name=\"l00025\"></a><span class=\"lineno\">   25</span>&#160;<span class=\"comment\">     * for example when `std.print(...)` has been called. When this is set to NULL (the default),</span></div>\n<div class=\"line\"><a name=\"l00026\"></a><span class=\"lineno\">   26</span>&#160;<span class=\"comment\">     * the message will be printed to the process&#39;s standard output.</span></div>\n<div class=\"line\"><a name=\"l00027\"></a><span class=\"lineno\">   27</span>&#160;<span class=\"comment\">     * </span></div>\n<div class=\"line\"><a name=\"l00028\"></a><span class=\"lineno\">   28</span>&#160;<span class=\"comment\">     * \\param message The string to print. Not guaranteed to be null terminated.</span></div>\n<div class=\"line\"><a name=\"l00029\"></a><span class=\"lineno\">   29</span>&#160;<span class=\"comment\">     * \\param size The size (in bytes) of the message string.</span></div>\n<div class=\"line\"><a name=\"l00030\"></a><span class=\"lineno\">   30</span>&#160;<span class=\"comment\">     * \\param userdata The userdata pointer set in this settings instance.</span></div>\n<div class=\"line\"><a name=\"l00031\"></a><span class=\"lineno\">   31</span>&#160;<span class=\"comment\">     */</span></div>\n<div class=\"line\"><a name=\"l00032\"></a><span class=\"lineno\"><a class=\"line\" href=\"structtiro__vm__settings.html#a8be24ae2165389c3723c8cd8234a6db9\">   32</a></span>&#160;    <span class=\"keywordtype\">void</span> (*<a class=\"code\" href=\"structtiro__vm__settings.html#a8be24ae2165389c3723c8cd8234a6db9\">print_stdout</a>)(<span class=\"keyword\">const</span> <span class=\"keywordtype\">char</span>* message, size_t size, <span class=\"keywordtype\">void</span>* userdata);</div>\n<div class=\"line\"><a name=\"l00033\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#a82835fd72166ac603afdab41c8d5d2b5\">   33</a></span>&#160;} tiro_vm_settings_t;</div>\n<div class=\"line\"><a name=\"l00034\"></a><span class=\"lineno\">   34</span>&#160; </div>\n<div class=\"line\"><a name=\"l00035\"></a><span class=\"lineno\">   35</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00036\"></a><span class=\"lineno\">   36</span>&#160;<span class=\"comment\"> * Initializes the given tiro settings object with default values.</span></div>\n<div class=\"line\"><a name=\"l00037\"></a><span class=\"lineno\">   37</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00038\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#a02dfec68f6de3e880da0d84663229332\">   38</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <span class=\"keywordtype\">void</span> <a class=\"code\" href=\"vm_8h.html#a02dfec68f6de3e880da0d84663229332\">tiro_vm_settings_init</a>(tiro_vm_settings_t* settings);</div>\n<div class=\"line\"><a name=\"l00039\"></a><span class=\"lineno\">   39</span>&#160; </div>\n<div class=\"line\"><a name=\"l00040\"></a><span class=\"lineno\">   40</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00041\"></a><span class=\"lineno\">   41</span>&#160;<span class=\"comment\"> * An instance of the tiro virtual machine. All virtual machines</span></div>\n<div class=\"line\"><a name=\"l00042\"></a><span class=\"lineno\">   42</span>&#160;<span class=\"comment\"> * are isolated from each other.</span></div>\n<div class=\"line\"><a name=\"l00043\"></a><span class=\"lineno\">   43</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00044\"></a><span class=\"lineno\">   44</span>&#160;<span class=\"keyword\">struct</span> tiro_vm;</div>\n<div class=\"line\"><a name=\"l00045\"></a><span class=\"lineno\">   45</span>&#160; </div>\n<div class=\"line\"><a name=\"l00046\"></a><span class=\"lineno\">   46</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00047\"></a><span class=\"lineno\">   47</span>&#160;<span class=\"comment\"> * Allocates a new virtual machine instance.</span></div>\n<div class=\"line\"><a name=\"l00048\"></a><span class=\"lineno\">   48</span>&#160;<span class=\"comment\"> * Reads settings from the given `settings` objects, if it is not NULL.</span></div>\n<div class=\"line\"><a name=\"l00049\"></a><span class=\"lineno\">   49</span>&#160;<span class=\"comment\"> * Otherwise uses default values.</span></div>\n<div class=\"line\"><a name=\"l00050\"></a><span class=\"lineno\">   50</span>&#160;<span class=\"comment\"> *</span></div>\n<div class=\"line\"><a name=\"l00051\"></a><span class=\"lineno\">   51</span>&#160;<span class=\"comment\"> * Returns NULL on allocation failure.</span></div>\n<div class=\"line\"><a name=\"l00052\"></a><span class=\"lineno\">   52</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00053\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#a32b2cfc858a63d3f7af8bbebe72df091\">   53</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <a class=\"code\" href=\"def_8h.html#af2b3edb31aa9b1ed34181336101dd156\">TIRO_WARN_UNUSED</a> <a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> <a class=\"code\" href=\"vm_8h.html#a32b2cfc858a63d3f7af8bbebe72df091\">tiro_vm_new</a>(</div>\n<div class=\"line\"><a name=\"l00054\"></a><span class=\"lineno\">   54</span>&#160;    <span class=\"keyword\">const</span> tiro_vm_settings_t* settings, <a class=\"code\" href=\"def_8h.html#a1daec122250bef5963460dccb0cda1bf\">tiro_error_t</a>* err);</div>\n<div class=\"line\"><a name=\"l00055\"></a><span class=\"lineno\">   55</span>&#160; </div>\n<div class=\"line\"><a name=\"l00056\"></a><span class=\"lineno\">   56</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00057\"></a><span class=\"lineno\">   57</span>&#160;<span class=\"comment\"> * Free a virtual machine. Must be called exactly once</span></div>\n<div class=\"line\"><a name=\"l00058\"></a><span class=\"lineno\">   58</span>&#160;<span class=\"comment\"> * for every vm created with `tiro_vm_new`.</span></div>\n<div class=\"line\"><a name=\"l00059\"></a><span class=\"lineno\">   59</span>&#160;<span class=\"comment\"> *</span></div>\n<div class=\"line\"><a name=\"l00060\"></a><span class=\"lineno\">   60</span>&#160;<span class=\"comment\"> * Does nothing if `vm` is NULL.</span></div>\n<div class=\"line\"><a name=\"l00061\"></a><span class=\"lineno\">   61</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00062\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#a42c6a6ee0f142b104e1290f88dc16fcc\">   62</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <span class=\"keywordtype\">void</span> <a class=\"code\" href=\"vm_8h.html#a42c6a6ee0f142b104e1290f88dc16fcc\">tiro_vm_free</a>(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vm);</div>\n<div class=\"line\"><a name=\"l00063\"></a><span class=\"lineno\">   63</span>&#160; </div>\n<div class=\"line\"><a name=\"l00064\"></a><span class=\"lineno\">   64</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00065\"></a><span class=\"lineno\">   65</span>&#160;<span class=\"comment\"> * Returns the userdata pointer that was passed in the settings struct during vm construction.</span></div>\n<div class=\"line\"><a name=\"l00066\"></a><span class=\"lineno\">   66</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00067\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#a1a76dacd02c8845ddaa3277734844bf2\">   67</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <span class=\"keywordtype\">void</span>* <a class=\"code\" href=\"vm_8h.html#a1a76dacd02c8845ddaa3277734844bf2\">tiro_vm_userdata</a>(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vm);</div>\n<div class=\"line\"><a name=\"l00068\"></a><span class=\"lineno\">   68</span>&#160; </div>\n<div class=\"line\"><a name=\"l00069\"></a><span class=\"lineno\">   69</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00070\"></a><span class=\"lineno\">   70</span>&#160;<span class=\"comment\"> * Load the default modules provided by the runtime.</span></div>\n<div class=\"line\"><a name=\"l00071\"></a><span class=\"lineno\">   71</span>&#160;<span class=\"comment\"> *</span></div>\n<div class=\"line\"><a name=\"l00072\"></a><span class=\"lineno\">   72</span>&#160;<span class=\"comment\"> * TODO: Configuration?</span></div>\n<div class=\"line\"><a name=\"l00073\"></a><span class=\"lineno\">   73</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00074\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#a6e066ba247cc439afcd3e28e2b93eeb1\">   74</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <span class=\"keywordtype\">void</span> <a class=\"code\" href=\"vm_8h.html#a6e066ba247cc439afcd3e28e2b93eeb1\">tiro_vm_load_std</a>(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vm, <a class=\"code\" href=\"def_8h.html#a1daec122250bef5963460dccb0cda1bf\">tiro_error_t</a>* err);</div>\n<div class=\"line\"><a name=\"l00075\"></a><span class=\"lineno\">   75</span>&#160; </div>\n<div class=\"line\"><a name=\"l00076\"></a><span class=\"lineno\">   76</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00077\"></a><span class=\"lineno\">   77</span>&#160;<span class=\"comment\"> * Loads the compiled module into the virtual machine.</span></div>\n<div class=\"line\"><a name=\"l00078\"></a><span class=\"lineno\">   78</span>&#160;<span class=\"comment\"> * </span></div>\n<div class=\"line\"><a name=\"l00079\"></a><span class=\"lineno\">   79</span>&#160;<span class=\"comment\"> * Note: this function does *not* take ownership of the module parameter.</span></div>\n<div class=\"line\"><a name=\"l00080\"></a><span class=\"lineno\">   80</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00081\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#a71c30baddda3d7a921d7e8b0e7b3b365\">   81</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <span class=\"keywordtype\">void</span> <a class=\"code\" href=\"vm_8h.html#a71c30baddda3d7a921d7e8b0e7b3b365\">tiro_vm_load_bytecode</a>(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vm, <a class=\"code\" href=\"def_8h.html#a11264dbb4fc0e60971025d29484ac06c\">tiro_module_t</a> module, <a class=\"code\" href=\"def_8h.html#a1daec122250bef5963460dccb0cda1bf\">tiro_error_t</a>* err);</div>\n<div class=\"line\"><a name=\"l00082\"></a><span class=\"lineno\">   82</span>&#160; </div>\n<div class=\"line\"><a name=\"l00083\"></a><span class=\"lineno\">   83</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00084\"></a><span class=\"lineno\">   84</span>&#160;<span class=\"comment\"> * Loads the given module object into the virtual machine.</span></div>\n<div class=\"line\"><a name=\"l00085\"></a><span class=\"lineno\">   85</span>&#160;<span class=\"comment\"> * Returns `TIRO_ERROR_MODULE_EXISTS` if a module with the same name already exists.</span></div>\n<div class=\"line\"><a name=\"l00086\"></a><span class=\"lineno\">   86</span>&#160;<span class=\"comment\"> * Returns `TIRO_ERROR_BAD_TYPE` if the argument is not actually a module.</span></div>\n<div class=\"line\"><a name=\"l00087\"></a><span class=\"lineno\">   87</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00088\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#a909e6f1bdd9436bed3bbce8c621a8e8f\">   88</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <span class=\"keywordtype\">void</span> <a class=\"code\" href=\"vm_8h.html#a909e6f1bdd9436bed3bbce8c621a8e8f\">tiro_vm_load_module</a>(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vm, <a class=\"code\" href=\"def_8h.html#a05c98647f6826f469e0b3cdb4c29df7f\">tiro_handle_t</a> module, <a class=\"code\" href=\"def_8h.html#a1daec122250bef5963460dccb0cda1bf\">tiro_error_t</a>* err);</div>\n<div class=\"line\"><a name=\"l00089\"></a><span class=\"lineno\">   89</span>&#160; </div>\n<div class=\"line\"><a name=\"l00090\"></a><span class=\"lineno\">   90</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00091\"></a><span class=\"lineno\">   91</span>&#160;<span class=\"comment\"> * Attempts to find the exported value with the given name in the specified module. The found function value</span></div>\n<div class=\"line\"><a name=\"l00092\"></a><span class=\"lineno\">   92</span>&#160;<span class=\"comment\"> * will be stored in the `result` handle, which must not be NULL.</span></div>\n<div class=\"line\"><a name=\"l00093\"></a><span class=\"lineno\">   93</span>&#160;<span class=\"comment\"> * </span></div>\n<div class=\"line\"><a name=\"l00094\"></a><span class=\"lineno\">   94</span>&#160;<span class=\"comment\"> * Returns `TIRO_ERROR_MODULE_NOT_FOUND` if the specified module was not loaded.</span></div>\n<div class=\"line\"><a name=\"l00095\"></a><span class=\"lineno\">   95</span>&#160;<span class=\"comment\"> * Returns `TIRO_ERROR_EXPORT_NOT_FOUND` if the module does not contain an exported member with that name.</span></div>\n<div class=\"line\"><a name=\"l00096\"></a><span class=\"lineno\">   96</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00097\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#aac5527995033a178347c35a7ddc479c3\">   97</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <span class=\"keywordtype\">void</span> <a class=\"code\" href=\"vm_8h.html#aac5527995033a178347c35a7ddc479c3\">tiro_vm_get_export</a>(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vm, <span class=\"keyword\">const</span> <span class=\"keywordtype\">char</span>* module_name, <span class=\"keyword\">const</span> <span class=\"keywordtype\">char</span>* function_name,</div>\n<div class=\"line\"><a name=\"l00098\"></a><span class=\"lineno\">   98</span>&#160;    <a class=\"code\" href=\"def_8h.html#a05c98647f6826f469e0b3cdb4c29df7f\">tiro_handle_t</a> result, <a class=\"code\" href=\"def_8h.html#a1daec122250bef5963460dccb0cda1bf\">tiro_error_t</a>* err);</div>\n<div class=\"line\"><a name=\"l00099\"></a><span class=\"lineno\">   99</span>&#160; </div>\n<div class=\"line\"><a name=\"l00100\"></a><span class=\"lineno\">  100</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00101\"></a><span class=\"lineno\">  101</span>&#160;<span class=\"comment\"> * Calls the given function and places the function&#39;s return value into `result` (if present).</span></div>\n<div class=\"line\"><a name=\"l00102\"></a><span class=\"lineno\">  102</span>&#160;<span class=\"comment\"> * </span></div>\n<div class=\"line\"><a name=\"l00103\"></a><span class=\"lineno\">  103</span>&#160;<span class=\"comment\"> * FIXME: Remove this, calling must be async.</span></div>\n<div class=\"line\"><a name=\"l00104\"></a><span class=\"lineno\">  104</span>&#160;<span class=\"comment\"> * FIXME: Implement convenience function for async call that creates and runs a coroutine, including</span></div>\n<div class=\"line\"><a name=\"l00105\"></a><span class=\"lineno\">  105</span>&#160;<span class=\"comment\"> * a result callback.</span></div>\n<div class=\"line\"><a name=\"l00106\"></a><span class=\"lineno\">  106</span>&#160;<span class=\"comment\"> * </span></div>\n<div class=\"line\"><a name=\"l00107\"></a><span class=\"lineno\">  107</span>&#160;<span class=\"comment\"> * \\param vm        The virtual machine instance.</span></div>\n<div class=\"line\"><a name=\"l00108\"></a><span class=\"lineno\">  108</span>&#160;<span class=\"comment\"> * \\param function  The function to call. Must not be NULL.</span></div>\n<div class=\"line\"><a name=\"l00109\"></a><span class=\"lineno\">  109</span>&#160;<span class=\"comment\"> * \\param arguments The function call arguments. Must be a tuple if arguments shall be passed, or a null value or NULL pointer</span></div>\n<div class=\"line\"><a name=\"l00110\"></a><span class=\"lineno\">  110</span>&#160;<span class=\"comment\"> *                  to indicate zero arguments.</span></div>\n<div class=\"line\"><a name=\"l00111\"></a><span class=\"lineno\">  111</span>&#160;<span class=\"comment\"> * \\param result    A handle in which the function&#39;s return value will be placed. Can be NULL.</span></div>\n<div class=\"line\"><a name=\"l00112\"></a><span class=\"lineno\">  112</span>&#160;<span class=\"comment\"> * \\param err       An optional error handle for detailed error information. </span></div>\n<div class=\"line\"><a name=\"l00113\"></a><span class=\"lineno\">  113</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00114\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#a0fc2a3db81e623bc20f138f25d9c53b7\">  114</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <span class=\"keywordtype\">void</span> <a class=\"code\" href=\"vm_8h.html#a0fc2a3db81e623bc20f138f25d9c53b7\">tiro_vm_call</a>(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vm, <a class=\"code\" href=\"def_8h.html#a05c98647f6826f469e0b3cdb4c29df7f\">tiro_handle_t</a> function, <a class=\"code\" href=\"def_8h.html#a05c98647f6826f469e0b3cdb4c29df7f\">tiro_handle_t</a> arguments,</div>\n<div class=\"line\"><a name=\"l00115\"></a><span class=\"lineno\">  115</span>&#160;    <a class=\"code\" href=\"def_8h.html#a05c98647f6826f469e0b3cdb4c29df7f\">tiro_handle_t</a> result, <a class=\"code\" href=\"def_8h.html#a1daec122250bef5963460dccb0cda1bf\">tiro_error_t</a>* err);</div>\n<div class=\"line\"><a name=\"l00116\"></a><span class=\"lineno\">  116</span>&#160; </div>\n<div class=\"line\"><a name=\"l00117\"></a><span class=\"lineno\">  117</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00118\"></a><span class=\"lineno\">  118</span>&#160;<span class=\"comment\"> * Runs all ready coroutines. Returns (and does not block) when all coroutines are either waiting or done.</span></div>\n<div class=\"line\"><a name=\"l00119\"></a><span class=\"lineno\">  119</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00120\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#abad4300ef3847662575fc2d360fe95aa\">  120</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <span class=\"keywordtype\">void</span> <a class=\"code\" href=\"vm_8h.html#abad4300ef3847662575fc2d360fe95aa\">tiro_vm_run_ready</a>(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vm, <a class=\"code\" href=\"def_8h.html#a1daec122250bef5963460dccb0cda1bf\">tiro_error_t</a>* err);</div>\n<div class=\"line\"><a name=\"l00121\"></a><span class=\"lineno\">  121</span>&#160; </div>\n<div class=\"line\"><a name=\"l00122\"></a><span class=\"lineno\">  122</span>&#160;<span class=\"comment\">/** </span></div>\n<div class=\"line\"><a name=\"l00123\"></a><span class=\"lineno\">  123</span>&#160;<span class=\"comment\"> * Returns true if the virtual machine has at least one coroutine ready for execution, false otherwise.</span></div>\n<div class=\"line\"><a name=\"l00124\"></a><span class=\"lineno\">  124</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00125\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#a1008eadc2d840c86fccc809c89154bfd\">  125</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <span class=\"keywordtype\">bool</span> <a class=\"code\" href=\"vm_8h.html#a1008eadc2d840c86fccc809c89154bfd\">tiro_vm_has_ready</a>(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vm);</div>\n<div class=\"line\"><a name=\"l00126\"></a><span class=\"lineno\">  126</span>&#160; </div>\n<div class=\"line\"><a name=\"l00127\"></a><span class=\"lineno\">  127</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00128\"></a><span class=\"lineno\">  128</span>&#160;<span class=\"comment\"> * Allocates a new global handle. Global handles point to a single rooted object slot that can hold</span></div>\n<div class=\"line\"><a name=\"l00129\"></a><span class=\"lineno\">  129</span>&#160;<span class=\"comment\"> * an arbitrary value. Slots are always initialized to null.</span></div>\n<div class=\"line\"><a name=\"l00130\"></a><span class=\"lineno\">  130</span>&#160;<span class=\"comment\"> * </span></div>\n<div class=\"line\"><a name=\"l00131\"></a><span class=\"lineno\">  131</span>&#160;<span class=\"comment\"> * When a global handle is no longer required, it should be freed by calling `tiro_global_free`.</span></div>\n<div class=\"line\"><a name=\"l00132\"></a><span class=\"lineno\">  132</span>&#160;<span class=\"comment\"> * </span></div>\n<div class=\"line\"><a name=\"l00133\"></a><span class=\"lineno\">  133</span>&#160;<span class=\"comment\"> * Returns NULL on allocation failure.</span></div>\n<div class=\"line\"><a name=\"l00134\"></a><span class=\"lineno\">  134</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00135\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#a6578f7f6e77ee0a6d129d172406e8f74\">  135</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <a class=\"code\" href=\"def_8h.html#af2b3edb31aa9b1ed34181336101dd156\">TIRO_WARN_UNUSED</a> <a class=\"code\" href=\"def_8h.html#a05c98647f6826f469e0b3cdb4c29df7f\">tiro_handle_t</a> <a class=\"code\" href=\"vm_8h.html#a6578f7f6e77ee0a6d129d172406e8f74\">tiro_global_new</a>(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vm, <a class=\"code\" href=\"def_8h.html#a1daec122250bef5963460dccb0cda1bf\">tiro_error_t</a>* err);</div>\n<div class=\"line\"><a name=\"l00136\"></a><span class=\"lineno\">  136</span>&#160; </div>\n<div class=\"line\"><a name=\"l00137\"></a><span class=\"lineno\">  137</span>&#160;<span class=\"comment\">/**</span></div>\n<div class=\"line\"><a name=\"l00138\"></a><span class=\"lineno\">  138</span>&#160;<span class=\"comment\"> * Frees a global handle allocated with `tiro_global_new`.</span></div>\n<div class=\"line\"><a name=\"l00139\"></a><span class=\"lineno\">  139</span>&#160;<span class=\"comment\"> * </span></div>\n<div class=\"line\"><a name=\"l00140\"></a><span class=\"lineno\">  140</span>&#160;<span class=\"comment\"> * Note: remaining globals are automatically freed when a vm is freed.</span></div>\n<div class=\"line\"><a name=\"l00141\"></a><span class=\"lineno\">  141</span>&#160;<span class=\"comment\"> */</span></div>\n<div class=\"line\"><a name=\"l00142\"></a><span class=\"lineno\"><a class=\"line\" href=\"vm_8h.html#ae7a4ad9fe5662fa5d99f2ffe4c0f9050\">  142</a></span>&#160;<a class=\"code\" href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a> <span class=\"keywordtype\">void</span> <a class=\"code\" href=\"vm_8h.html#ae7a4ad9fe5662fa5d99f2ffe4c0f9050\">tiro_global_free</a>(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vm, <a class=\"code\" href=\"def_8h.html#a05c98647f6826f469e0b3cdb4c29df7f\">tiro_handle_t</a> global);</div>\n<div class=\"line\"><a name=\"l00143\"></a><span class=\"lineno\">  143</span>&#160; </div>\n<div class=\"line\"><a name=\"l00144\"></a><span class=\"lineno\">  144</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">ifdef</span> __cplusplus</div>\n<div class=\"line\"><a name=\"l00145\"></a><span class=\"lineno\">  145</span>&#160;} <span class=\"comment\">/* extern &quot;C&quot; */</span></div>\n<div class=\"line\"><a name=\"l00146\"></a><span class=\"lineno\">  146</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">endif</span></div>\n<div class=\"line\"><a name=\"l00147\"></a><span class=\"lineno\">  147</span>&#160; </div>\n<div class=\"line\"><a name=\"l00148\"></a><span class=\"lineno\">  148</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">endif</span> <span class=\"comment\">// TIRO_VM_H_INCLUDED</span></div>\n</div><!-- fragment --></div><!-- contents -->\n<div class=\"ttc\" id=\"avm_8h_html_abad4300ef3847662575fc2d360fe95aa\"><div class=\"ttname\"><a href=\"vm_8h.html#abad4300ef3847662575fc2d360fe95aa\">tiro_vm_run_ready</a></div><div class=\"ttdeci\">void tiro_vm_run_ready(tiro_vm_t vm, tiro_error_t *err)</div><div class=\"ttdoc\">Runs all ready coroutines.</div></div>\n<div class=\"ttc\" id=\"avm_8h_html_a1008eadc2d840c86fccc809c89154bfd\"><div class=\"ttname\"><a href=\"vm_8h.html#a1008eadc2d840c86fccc809c89154bfd\">tiro_vm_has_ready</a></div><div class=\"ttdeci\">bool tiro_vm_has_ready(tiro_vm_t vm)</div><div class=\"ttdoc\">Returns true if the virtual machine has at least one coroutine ready for execution,...</div></div>\n<div class=\"ttc\" id=\"avm_8h_html_a02dfec68f6de3e880da0d84663229332\"><div class=\"ttname\"><a href=\"vm_8h.html#a02dfec68f6de3e880da0d84663229332\">tiro_vm_settings_init</a></div><div class=\"ttdeci\">void tiro_vm_settings_init(tiro_vm_settings_t *settings)</div><div class=\"ttdoc\">Initializes the given tiro settings object with default values.</div></div>\n<div class=\"ttc\" id=\"avm_8h_html_a909e6f1bdd9436bed3bbce8c621a8e8f\"><div class=\"ttname\"><a href=\"vm_8h.html#a909e6f1bdd9436bed3bbce8c621a8e8f\">tiro_vm_load_module</a></div><div class=\"ttdeci\">void tiro_vm_load_module(tiro_vm_t vm, tiro_handle_t module, tiro_error_t *err)</div><div class=\"ttdoc\">Loads the given module object into the virtual machine.</div></div>\n<div class=\"ttc\" id=\"avm_8h_html_a6e066ba247cc439afcd3e28e2b93eeb1\"><div class=\"ttname\"><a href=\"vm_8h.html#a6e066ba247cc439afcd3e28e2b93eeb1\">tiro_vm_load_std</a></div><div class=\"ttdeci\">void tiro_vm_load_std(tiro_vm_t vm, tiro_error_t *err)</div><div class=\"ttdoc\">Load the default modules provided by the runtime.</div></div>\n<div class=\"ttc\" id=\"avm_8h_html_a71c30baddda3d7a921d7e8b0e7b3b365\"><div class=\"ttname\"><a href=\"vm_8h.html#a71c30baddda3d7a921d7e8b0e7b3b365\">tiro_vm_load_bytecode</a></div><div class=\"ttdeci\">void tiro_vm_load_bytecode(tiro_vm_t vm, tiro_module_t module, tiro_error_t *err)</div><div class=\"ttdoc\">Loads the compiled module into the virtual machine.</div></div>\n<div class=\"ttc\" id=\"avm_8h_html_aac5527995033a178347c35a7ddc479c3\"><div class=\"ttname\"><a href=\"vm_8h.html#aac5527995033a178347c35a7ddc479c3\">tiro_vm_get_export</a></div><div class=\"ttdeci\">void tiro_vm_get_export(tiro_vm_t vm, const char *module_name, const char *function_name, tiro_handle_t result, tiro_error_t *err)</div><div class=\"ttdoc\">Attempts to find the exported value with the given name in the specified module.</div></div>\n<div class=\"ttc\" id=\"avm_8h_html_a42c6a6ee0f142b104e1290f88dc16fcc\"><div class=\"ttname\"><a href=\"vm_8h.html#a42c6a6ee0f142b104e1290f88dc16fcc\">tiro_vm_free</a></div><div class=\"ttdeci\">void tiro_vm_free(tiro_vm_t vm)</div><div class=\"ttdoc\">Free a virtual machine.</div></div>\n<div class=\"ttc\" id=\"adef_8h_html_a05c98647f6826f469e0b3cdb4c29df7f\"><div class=\"ttname\"><a href=\"def_8h.html#a05c98647f6826f469e0b3cdb4c29df7f\">tiro_handle_t</a></div><div class=\"ttdeci\">struct tiro_value * tiro_handle_t</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"def_8h_source.html#l00046\">def.h:46</a></div></div>\n<div class=\"ttc\" id=\"astructtiro__vm__settings_html_a8be24ae2165389c3723c8cd8234a6db9\"><div class=\"ttname\"><a href=\"structtiro__vm__settings.html#a8be24ae2165389c3723c8cd8234a6db9\">tiro_vm_settings::print_stdout</a></div><div class=\"ttdeci\">void(* print_stdout)(const char *message, size_t size, void *userdata)</div><div class=\"ttdoc\">This callback is invoked when the vm attempts to print to the standard output stream,...</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"vm_8h_source.html#l00032\">vm.h:32</a></div></div>\n<div class=\"ttc\" id=\"avm_8h_html_a6578f7f6e77ee0a6d129d172406e8f74\"><div class=\"ttname\"><a href=\"vm_8h.html#a6578f7f6e77ee0a6d129d172406e8f74\">tiro_global_new</a></div><div class=\"ttdeci\">tiro_handle_t tiro_global_new(tiro_vm_t vm, tiro_error_t *err)</div><div class=\"ttdoc\">Allocates a new global handle.</div></div>\n<div class=\"ttc\" id=\"adef_8h_html_a1daec122250bef5963460dccb0cda1bf\"><div class=\"ttname\"><a href=\"def_8h.html#a1daec122250bef5963460dccb0cda1bf\">tiro_error_t</a></div><div class=\"ttdeci\">struct tiro_error * tiro_error_t</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"def_8h_source.html#l00042\">def.h:42</a></div></div>\n<div class=\"ttc\" id=\"adef_8h_html_af2b3edb31aa9b1ed34181336101dd156\"><div class=\"ttname\"><a href=\"def_8h.html#af2b3edb31aa9b1ed34181336101dd156\">TIRO_WARN_UNUSED</a></div><div class=\"ttdeci\">#define TIRO_WARN_UNUSED</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"def_8h_source.html#l00029\">def.h:29</a></div></div>\n<div class=\"ttc\" id=\"astructtiro__vm__settings_html\"><div class=\"ttname\"><a href=\"structtiro__vm__settings.html\">tiro_vm_settings</a></div><div class=\"ttdoc\">The tiro_vm_settings structure can be provided to tiro_vm_new as a configuration parameter.</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"vm_8h_source.html#l00016\">vm.h:16</a></div></div>\n<div class=\"ttc\" id=\"avm_8h_html_a32b2cfc858a63d3f7af8bbebe72df091\"><div class=\"ttname\"><a href=\"vm_8h.html#a32b2cfc858a63d3f7af8bbebe72df091\">tiro_vm_new</a></div><div class=\"ttdeci\">tiro_vm_t tiro_vm_new(const tiro_vm_settings_t *settings, tiro_error_t *err)</div><div class=\"ttdoc\">Allocates a new virtual machine instance.</div></div>\n<div class=\"ttc\" id=\"adef_8h_html_a2083086d859c96274dfb0ea959901917\"><div class=\"ttname\"><a href=\"def_8h.html#a2083086d859c96274dfb0ea959901917\">TIRO_API</a></div><div class=\"ttdeci\">#define TIRO_API</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"def_8h_source.html#l00009\">def.h:9</a></div></div>\n<div class=\"ttc\" id=\"avm_8h_html_a0fc2a3db81e623bc20f138f25d9c53b7\"><div class=\"ttname\"><a href=\"vm_8h.html#a0fc2a3db81e623bc20f138f25d9c53b7\">tiro_vm_call</a></div><div class=\"ttdeci\">void tiro_vm_call(tiro_vm_t vm, tiro_handle_t function, tiro_handle_t arguments, tiro_handle_t result, tiro_error_t *err)</div><div class=\"ttdoc\">Calls the given function and places the function's return value into result (if present).</div></div>\n<div class=\"ttc\" id=\"adef_8h_html_a11264dbb4fc0e60971025d29484ac06c\"><div class=\"ttname\"><a href=\"def_8h.html#a11264dbb4fc0e60971025d29484ac06c\">tiro_module_t</a></div><div class=\"ttdeci\">struct tiro_module * tiro_module_t</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"def_8h_source.html#l00045\">def.h:45</a></div></div>\n<div class=\"ttc\" id=\"avm_8h_html_a1a76dacd02c8845ddaa3277734844bf2\"><div class=\"ttname\"><a href=\"vm_8h.html#a1a76dacd02c8845ddaa3277734844bf2\">tiro_vm_userdata</a></div><div class=\"ttdeci\">void * tiro_vm_userdata(tiro_vm_t vm)</div><div class=\"ttdoc\">Returns the userdata pointer that was passed in the settings struct during vm construction.</div></div>\n<div class=\"ttc\" id=\"adef_8h_html_ab245e53a3c1e25d97f20a077b0749805\"><div class=\"ttname\"><a href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a></div><div class=\"ttdeci\">struct tiro_vm * tiro_vm_t</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"def_8h_source.html#l00043\">def.h:43</a></div></div>\n<div class=\"ttc\" id=\"astructtiro__vm__settings_html_afd0ffb02780e738d4c0a10ab833b7834\"><div class=\"ttname\"><a href=\"structtiro__vm__settings.html#afd0ffb02780e738d4c0a10ab833b7834\">tiro_vm_settings::userdata</a></div><div class=\"ttdeci\">void * userdata</div><div class=\"ttdoc\">Arbitrary user data that will be accessible by calling tiro_vm_userdata().</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"vm_8h_source.html#l00021\">vm.h:21</a></div></div>\n<div class=\"ttc\" id=\"avm_8h_html_ae7a4ad9fe5662fa5d99f2ffe4c0f9050\"><div class=\"ttname\"><a href=\"vm_8h.html#ae7a4ad9fe5662fa5d99f2ffe4c0f9050\">tiro_global_free</a></div><div class=\"ttdeci\">void tiro_global_free(tiro_vm_t vm, tiro_handle_t global)</div><div class=\"ttdoc\">Frees a global handle allocated with tiro_global_new.</div></div>\n"}},"staticQueryHashes":["3649515864","63159454"]}