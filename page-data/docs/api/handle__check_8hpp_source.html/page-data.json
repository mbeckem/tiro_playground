{"componentChunkName":"component---src-templates-doxygen-article-tsx","path":"/docs/api/handle__check_8hpp_source.html","result":{"pageContext":{"title":"tiropp/detail/handle_check.hpp Source File","rawHtml":"<div id=\"top\"><!-- do not remove this div, it is closed by doxygen! -->\n<!-- Generated by Doxygen 1.8.20 -->\n  <div id=\"navrow1\" class=\"tabs\">\n    <ul class=\"tablist\">\n      <li><a href=\"index.html\"><span>Main&#160;Page</span></a></li>\n      <li><a href=\"pages.html\"><span>Related&#160;Pages</span></a></li>\n      <li><a href=\"namespaces.html\"><span>Namespaces</span></a></li>\n      <li><a href=\"annotated.html\"><span>Classes</span></a></li>\n      <li class=\"current\"><a href=\"files.html\"><span>Files</span></a></li>\n    </ul>\n  </div>\n  <div id=\"navrow2\" class=\"tabs2\">\n    <ul class=\"tablist\">\n      <li><a href=\"files.html\"><span>File&#160;List</span></a></li>\n      <li><a href=\"globals.html\"><span>File&#160;Members</span></a></li>\n    </ul>\n  </div>\n<div id=\"nav-path\" class=\"navpath\">\n  <ul>\n<li class=\"navelem\"><a class=\"el\" href=\"dir_1afa3d02dad28855ed97b47c27baf04d.html\">tiropp</a></li><li class=\"navelem\"><a class=\"el\" href=\"dir_cc9165f2e48b3112d9525ed4bc876408.html\">detail</a></li>  </ul>\n</div>\n</div><!-- top -->\n<div class=\"header\">\n  <div class=\"headertitle\">\n<div class=\"title\">handle_check.hpp</div>  </div>\n</div><!--header-->\n<div class=\"contents\">\n<a href=\"handle__check_8hpp.html\">Go to the documentation of this file.</a><div class=\"fragment\"><div class=\"line\"><a name=\"l00001\"></a><span class=\"lineno\">    1</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">ifndef</span> <span class=\"preprocessor\">TIROPP_DETAIL_HANDLE_CHECK_HPP_INCLUDED</span></div>\n<div class=\"line\"><a name=\"l00002\"></a><span class=\"lineno\">    2</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">define</span> <span class=\"preprocessor\">TIROPP_DETAIL_HANDLE_CHECK_HPP_INCLUDED</span></div>\n<div class=\"line\"><a name=\"l00003\"></a><span class=\"lineno\">    3</span>&#160; </div>\n<div class=\"line\"><a name=\"l00004\"></a><span class=\"lineno\">    4</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">include</span> <span class=\"preprocessor\">&quot;tiropp/def.hpp&quot;</span></div>\n<div class=\"line\"><a name=\"l00005\"></a><span class=\"lineno\">    5</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">include</span> <span class=\"preprocessor\">&quot;tiropp/error.hpp&quot;</span></div>\n<div class=\"line\"><a name=\"l00006\"></a><span class=\"lineno\">    6</span>&#160; </div>\n<div class=\"line\"><a name=\"l00007\"></a><span class=\"lineno\">    7</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">include</span> <span class=\"preprocessor\">&quot;tiro/def.h&quot;</span></div>\n<div class=\"line\"><a name=\"l00008\"></a><span class=\"lineno\">    8</span>&#160; </div>\n<div class=\"line\"><a name=\"l00009\"></a><span class=\"lineno\">    9</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">include</span> <span class=\"preprocessor\">&lt;</span><span class=\"preprocessor\">stdexcept</span><span class=\"preprocessor\">&gt;</span></div>\n<div class=\"line\"><a name=\"l00010\"></a><span class=\"lineno\">   10</span>&#160; </div>\n<div class=\"line\"><a name=\"l00011\"></a><span class=\"lineno\"><a class=\"line\" href=\"namespacetiro_1_1detail.html\">   11</a></span>&#160;<span class=\"keyword\">namespace</span> <a class=\"code\" href=\"namespacetiro.html\">tiro</a>::<a class=\"code\" href=\"namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5\">detail</a> {</div>\n<div class=\"line\"><a name=\"l00012\"></a><span class=\"lineno\">   12</span>&#160; </div>\n<div class=\"line\"><a name=\"l00013\"></a><span class=\"lineno\">   13</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">ifdef</span> <a class=\"code\" href=\"def_8hpp.html#afcbed27ab93c47dc136fe23daba877e9\">TIRO_HANDLE_CHECKS</a></div>\n<div class=\"line\"><a name=\"l00014\"></a><span class=\"lineno\">   14</span>&#160; </div>\n<div class=\"line\"><a name=\"l00015\"></a><span class=\"lineno\">   15</span>&#160;<span class=\"keyword\">inline</span> <span class=\"keywordtype\">void</span> check_handle_vms(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> expected, <span class=\"keyword\">const</span> <a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a>* vms, size_t size) {</div>\n<div class=\"line\"><a name=\"l00016\"></a><span class=\"lineno\">   16</span>&#160;    <span class=\"keywordflow\">if</span> (!expected)</div>\n<div class=\"line\"><a name=\"l00017\"></a><span class=\"lineno\">   17</span>&#160;        <span class=\"keywordflow\">throw</span> bad_handle_check<a class=\"code\" href=\"classtiro_1_1bad__handle__check.html#a7c6f2fd69699b26b37eabd3ef8ce4162\">(</a><span class=\"stringliteral\">&quot;Invalid virtual machine&quot;</span><a class=\"code\" href=\"classtiro_1_1bad__handle__check.html#a7c6f2fd69699b26b37eabd3ef8ce4162\">)</a>;</div>\n<div class=\"line\"><a name=\"l00018\"></a><span class=\"lineno\">   18</span>&#160; </div>\n<div class=\"line\"><a name=\"l00019\"></a><span class=\"lineno\">   19</span>&#160;    <span class=\"keywordflow\">for</span> (size_t i = 0; i &lt; size; ++i) {</div>\n<div class=\"line\"><a name=\"l00020\"></a><span class=\"lineno\">   20</span>&#160;        <a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> current = vms[i];</div>\n<div class=\"line\"><a name=\"l00021\"></a><span class=\"lineno\">   21</span>&#160;        <span class=\"keywordflow\">if</span> (!current)</div>\n<div class=\"line\"><a name=\"l00022\"></a><span class=\"lineno\">   22</span>&#160;            <span class=\"keywordflow\">throw</span> bad_handle_check<a class=\"code\" href=\"classtiro_1_1bad__handle__check.html#a7c6f2fd69699b26b37eabd3ef8ce4162\">(</a><span class=\"stringliteral\">&quot;Invalid virtual machine&quot;</span><a class=\"code\" href=\"classtiro_1_1bad__handle__check.html#a7c6f2fd69699b26b37eabd3ef8ce4162\">)</a>;</div>\n<div class=\"line\"><a name=\"l00023\"></a><span class=\"lineno\">   23</span>&#160;        <span class=\"keywordflow\">if</span> (current != expected)</div>\n<div class=\"line\"><a name=\"l00024\"></a><span class=\"lineno\">   24</span>&#160;            <span class=\"keywordflow\">throw</span> bad_handle_check<a class=\"code\" href=\"classtiro_1_1bad__handle__check.html#a7c6f2fd69699b26b37eabd3ef8ce4162\">(</a></div>\n<div class=\"line\"><a name=\"l00025\"></a><span class=\"lineno\">   25</span>&#160;                <span class=\"stringliteral\">&quot;Handles that belong to different virtual machines must not be mixed&quot;</span><a class=\"code\" href=\"classtiro_1_1bad__handle__check.html#a7c6f2fd69699b26b37eabd3ef8ce4162\">)</a>;</div>\n<div class=\"line\"><a name=\"l00026\"></a><span class=\"lineno\">   26</span>&#160;    }</div>\n<div class=\"line\"><a name=\"l00027\"></a><span class=\"lineno\">   27</span>&#160;}</div>\n<div class=\"line\"><a name=\"l00028\"></a><span class=\"lineno\">   28</span>&#160; </div>\n<div class=\"line\"><a name=\"l00029\"></a><span class=\"lineno\">   29</span>&#160;<span class=\"keyword\">inline</span> <span class=\"keywordtype\">void</span> check_handle_values(<span class=\"keyword\">const</span> <a class=\"code\" href=\"def_8h.html#a05c98647f6826f469e0b3cdb4c29df7f\">tiro_handle_t</a>* handles, size_t size) {</div>\n<div class=\"line\"><a name=\"l00030\"></a><span class=\"lineno\">   30</span>&#160;    <span class=\"keywordflow\">for</span> (size_t i = 0; i &lt; size; ++i) {</div>\n<div class=\"line\"><a name=\"l00031\"></a><span class=\"lineno\">   31</span>&#160;        <a class=\"code\" href=\"def_8h.html#a05c98647f6826f469e0b3cdb4c29df7f\">tiro_handle_t</a> current = handles[i];</div>\n<div class=\"line\"><a name=\"l00032\"></a><span class=\"lineno\">   32</span>&#160;        <span class=\"keywordflow\">if</span> (!current)</div>\n<div class=\"line\"><a name=\"l00033\"></a><span class=\"lineno\">   33</span>&#160;            <span class=\"keywordflow\">throw</span> bad_handle_check<a class=\"code\" href=\"classtiro_1_1bad__handle__check.html#a7c6f2fd69699b26b37eabd3ef8ce4162\">(</a><span class=\"stringliteral\">&quot;Invalid handle&quot;</span><a class=\"code\" href=\"classtiro_1_1bad__handle__check.html#a7c6f2fd69699b26b37eabd3ef8ce4162\">)</a>;</div>\n<div class=\"line\"><a name=\"l00034\"></a><span class=\"lineno\">   34</span>&#160;    }</div>\n<div class=\"line\"><a name=\"l00035\"></a><span class=\"lineno\">   35</span>&#160;}</div>\n<div class=\"line\"><a name=\"l00036\"></a><span class=\"lineno\">   36</span>&#160; </div>\n<div class=\"line\"><a name=\"l00037\"></a><span class=\"lineno\">   37</span>&#160;<span class=\"keyword\">template</span>&lt;<span class=\"keyword\">typename</span>... Handles&gt;</div>\n<div class=\"line\"><a name=\"l00038\"></a><span class=\"lineno\">   38</span>&#160;<span class=\"keywordtype\">void</span> check_handles(<a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vm, <span class=\"keyword\">const</span> Handles&amp;... handles) {</div>\n<div class=\"line\"><a name=\"l00039\"></a><span class=\"lineno\">   39</span>&#160;    <span class=\"keyword\">const</span> <a class=\"code\" href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a> vms[] = {handles.raw_vm()...};</div>\n<div class=\"line\"><a name=\"l00040\"></a><span class=\"lineno\">   40</span>&#160;    check_handle_vms(vm, vms, <span class=\"keyword\">sizeof</span>...(Handles));</div>\n<div class=\"line\"><a name=\"l00041\"></a><span class=\"lineno\">   41</span>&#160; </div>\n<div class=\"line\"><a name=\"l00042\"></a><span class=\"lineno\">   42</span>&#160;    <span class=\"keyword\">const</span> <a class=\"code\" href=\"def_8h.html#a05c98647f6826f469e0b3cdb4c29df7f\">tiro_handle_t</a> raw_handles[] = {handles.raw_handle()...};</div>\n<div class=\"line\"><a name=\"l00043\"></a><span class=\"lineno\">   43</span>&#160;    check_handle_values(raw_handles, <span class=\"keyword\">sizeof</span>...(Handles));</div>\n<div class=\"line\"><a name=\"l00044\"></a><span class=\"lineno\">   44</span>&#160;}</div>\n<div class=\"line\"><a name=\"l00045\"></a><span class=\"lineno\">   45</span>&#160; </div>\n<div class=\"line\"><a name=\"l00046\"></a><span class=\"lineno\">   46</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">else</span></div>\n<div class=\"line\"><a name=\"l00047\"></a><span class=\"lineno\">   47</span>&#160; </div>\n<div class=\"line\"><a name=\"l00048\"></a><span class=\"lineno\">   48</span>&#160;<span class=\"keyword\">template</span>&lt;<span class=\"keyword\">typename</span>... <a class=\"code\" href=\"namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5\">Handles</a>&gt;</div>\n<div class=\"line\"><a name=\"l00049\"></a><span class=\"lineno\"><a class=\"line\" href=\"namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5\">   49</a></span>&#160;<span class=\"keywordtype\">void</span> <a class=\"code\" href=\"namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5\">check_handles</a>(<a class=\"code\" href=\"namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5\">tiro_vm_t</a>, <span class=\"keyword\">const</span> <a class=\"code\" href=\"namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5\">Handles</a>&amp;...) {}</div>\n<div class=\"line\"><a name=\"l00050\"></a><span class=\"lineno\">   50</span>&#160; </div>\n<div class=\"line\"><a name=\"l00051\"></a><span class=\"lineno\">   51</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">endif</span></div>\n<div class=\"line\"><a name=\"l00052\"></a><span class=\"lineno\">   52</span>&#160; </div>\n<div class=\"line\"><a name=\"l00053\"></a><span class=\"lineno\">   53</span>&#160;} <span class=\"comment\">// namespace tiro::detail</span></div>\n<div class=\"line\"><a name=\"l00054\"></a><span class=\"lineno\">   54</span>&#160; </div>\n<div class=\"line\"><a name=\"l00055\"></a><span class=\"lineno\">   55</span>&#160;<span class=\"preprocessor\">#</span><span class=\"preprocessor\">endif</span> <span class=\"comment\">// TIROPP_DETAIL_HANDLE_CHECK_HPP_INCLUDED</span></div>\n</div><!-- fragment --></div><!-- contents -->\n<div class=\"ttc\" id=\"anamespacetiro_1_1detail_html_a4c18f96591ca42f3ea6c7738593bb3f5\"><div class=\"ttname\"><a href=\"namespacetiro_1_1detail.html#a4c18f96591ca42f3ea6c7738593bb3f5\">tiro::detail::check_handles</a></div><div class=\"ttdeci\">void check_handles(tiro_vm_t, const Handles &amp;...)</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"handle__check_8hpp_source.html#l00049\">handle_check.hpp:49</a></div></div>\n<div class=\"ttc\" id=\"adef_8h_html_a05c98647f6826f469e0b3cdb4c29df7f\"><div class=\"ttname\"><a href=\"def_8h.html#a05c98647f6826f469e0b3cdb4c29df7f\">tiro_handle_t</a></div><div class=\"ttdeci\">struct tiro_value * tiro_handle_t</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"def_8h_source.html#l00046\">def.h:46</a></div></div>\n<div class=\"ttc\" id=\"adef_8hpp_html_afcbed27ab93c47dc136fe23daba877e9\"><div class=\"ttname\"><a href=\"def_8hpp.html#afcbed27ab93c47dc136fe23daba877e9\">TIRO_HANDLE_CHECKS</a></div><div class=\"ttdeci\">#define TIRO_HANDLE_CHECKS</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"def_8hpp_source.html#l00013\">def.hpp:13</a></div></div>\n<div class=\"ttc\" id=\"anamespacetiro_html\"><div class=\"ttname\"><a href=\"namespacetiro.html\">tiro</a></div><div class=\"ttdef\"><b>Definition:</b> <a href=\"compiler_8hpp_source.html#l00014\">compiler.hpp:14</a></div></div>\n<div class=\"ttc\" id=\"adef_8h_html_ab245e53a3c1e25d97f20a077b0749805\"><div class=\"ttname\"><a href=\"def_8h.html#ab245e53a3c1e25d97f20a077b0749805\">tiro_vm_t</a></div><div class=\"ttdeci\">struct tiro_vm * tiro_vm_t</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"def_8h_source.html#l00043\">def.h:43</a></div></div>\n<div class=\"ttc\" id=\"aclasstiro_1_1bad__handle__check_html_a7c6f2fd69699b26b37eabd3ef8ce4162\"><div class=\"ttname\"><a href=\"classtiro_1_1bad__handle__check.html#a7c6f2fd69699b26b37eabd3ef8ce4162\">tiro::bad_handle_check::bad_handle_check</a></div><div class=\"ttdeci\">bad_handle_check(std::string message)</div><div class=\"ttdef\"><b>Definition:</b> <a href=\"error_8hpp_source.html#l00068\">error.hpp:68</a></div></div>\n"}},"staticQueryHashes":["3649515864","63159454"]}